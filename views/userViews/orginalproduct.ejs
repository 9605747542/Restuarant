<!doctype html>
<html class="no-js" lang="zxx">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Shop | eCommerce</title>
  <meta name="description" content>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="site.webmanifest">
  <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
  <link rel="stylesheet" href="assets/css/slicknav.css">
  <link rel="stylesheet" href="assets/css/flaticon.css">
  <link rel="stylesheet" href="assets/css/progressbar_barfiller.css">
  <link rel="stylesheet" href="assets/css/lightslider.min.css">
  <link rel="stylesheet" href="assets/css/price_rangs.css">
  <link rel="stylesheet" href="assets/css/gijgo.css">
  <link rel="stylesheet" href="assets/css/animate.min.css">
  <link rel="stylesheet" href="assets/css/animated-headline.css">
  <link rel="stylesheet" href="assets/css/magnific-popup.css">
  <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
  <link rel="stylesheet" href="assets/css/themify-icons.css">
  <link rel="stylesheet" href="assets/css/slick.css">
  <link rel="stylesheet" href="assets/css/nice-select.css">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<style>
  /* Define styles for the badge */
.badge {
    position: absolute;
    top: 0px;
    right: 0px;
    display: inline-block;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
}

/* Define styles for the yellow badge */
.badge-yellow {
    background-color: #ffc107;
    color: black;
}

/* Define styles for the warning badge */
.badge-warning {
    background-color: orange;
    color: black;
}

</style>

<body class="full-wrapper">

  

  <header>

    <div class="header-area">
      <div class="main-header header-sticky">
        <div class="container-fluid">
          <div class="row menu-wrapper align-items-center justify-content-between">
            <div class="header-left d-flex align-items-center">

              <div class="logo">
                <a href="index.html"><img src="assets/img/logo/logo.png" alt></a>
              </div>

              <div class="logo2">
                <a href="index.html"><img src="assets/img/logo/logo2.png" alt></a>
              </div>

              <div class="main-menu  d-none d-lg-block">
                <nav>
                  <ul id="navigation">
                    <li><a href="/home">Home</a></li>



                  </ul>
                </nav>
              </div>
            </div>
            <div class="header-right1 d-flex align-items-center">
              <div class="search">
                <ul class="d-flex align-items-center">
                  <li>

                   
                  </li>
                  <li>
                    <a  class="account-btn" target="_blank">
                      <%=user.name%>
                    </a>
                  </li>
                  <li>
                    <div class="card-stor">
                      <a href="/usercart"><img src="assets/img/icon/card.svg" alt></a>
                      <span>
                        <%=count%>
                      </span>
                    </div>
                  </li>
                  <li>
                    <a href="/getwishlist"><div class="card-stor" style="margin-left: 25px;font-weight:bold">
                       <img src="assets/img/icon/love.png" alt>
                       <span>0</span>
                     </div>
                   </a>
                     
                   </li>
                </ul>
              </div>
            </div>

            <div class="col-12">
              <div class="mobile_menu d-block d-lg-none"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </header>
  <main>

    <div class="slider-area ">
      <div class="slider-active">
        <div class="single-slider hero-overly2  slider-height2 d-flex align-items-center slider-bg2">
          <div class="container">
            <div class="row">
              <div class="col-xl-6 col-lg-8 col-md-8">
                <div class="hero__caption hero__caption2">
                  <h1 data-animation="fadeInUp" data-delay=".4s">Products</h1>
                  <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                      <li class="breadcrumb-item"><a href="#">Products</a></li>
                    </ol>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div class="category-area">
      <div class="container">
        <div class="row">
          <div class="col-xl-7 col-lg-8 col-md-10">
            <div class="section-tittle mb-50">
              <h2>Shop with us</h2>
            </div>
          </div>
        </div>
        

         

          <div class="col-xl-9 col-lg-9 col-md-8 ">

            <div class="row">
              <div class="col-lg-12">
                <div class="count-job mb-100">

                  <form action='/sort' method="GET">
                  <div class="select-cat">
                    <span >Sort by:</span>
                    <select  name="sortBy" style="width: 150px;" id="sortByselect">
                      <option value="priceHighToLow">Price:high to low</option>
                      <option value="popularity">Popularity</option>
                      <option value="priceLowToHigh">Price:low to high</option>
                      <option value="aToz">aA - zZ</option>
                      <option value="zToa">zZ - aA</option>
                      <option value="newArrival">New Arrival</option>
                    </select>
               
                  </div>
                  <br>
                  <button style="background-color: #e9855a; padding: 5px 10px; border: none; color: white; cursor: pointer;">Submit</button>
                </form>

               

                  <form action="/search"  class="form-box f-right ">
                    <input type="text" name="query" id="searchinput" placeholder="Search products">
                   
                    <div class="search-icon">
                      <br><br>
                      <button class="w-10" style="background-color: #e9855a; padding: 5px 10px; border: none; color: white; cursor: pointer;">Search</button>
                    </div>
                  </form>
                  <form action='/filter' method="GET">
                    <div class="select-cat">
                      <span >Filter by:</span>
                      <select class="form-select" id="category" name="category">
                     
                        <% for(let i = 0; i < category.length; i++) { %>
                          <option><%= category[i].categoryName %></option>
                        <% } %>
                      </select>
                 
                    </div>
                    <br>
                    <button style="background-color: #e9855a; padding: 5px 10px; border: none; color: white; cursor: pointer;">Submit</button>
                  </form>

                </div>
              </div>
            </div>

<br><br>
            <div class="new-arrival new-arrival3">
              <div class="row" id="productsList">
                  <% for (let i = 0; i < data.length; i++) { %>
                      <% if (data[i].unlist === false) { %>
                          <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6">
                              <div class="single-new-arrival mb-50 text-center" style="margin-bottom: 20px;">
                                  <div class="popular-img">
                                      <a href="/clickproduct/?id=<%=data[i]._id%>">
                                          <img src="<%= data[i].image[0] %>" alt="<%= data[i].productName %>">
                                      </a>
                                      <% if (data[i].orginalPrice !== 0) { %>
                                        <span class="badge badge-warning"><%= data[i].discount %></span>
                                   
                                    <span class="badge badge-yellow"><%=data[i].discount%>% Off</span> 
                                    <% } %>
                                  </div>
                                  <div class="popular-caption">
                                    <h5 class="title"><a href="shop-detail.html"><%= data[i].productName %></a></h5>
                                    <ul class="dz-rating">
                                      <li style="display: inline-block;"><i class="fa-solid fa-star" style="color: gold;"></i>
                                      </li>
                                      <li style="display: inline-block;"><i class="fa-solid fa-star" style="color: gold;"></i>
                                      </li>
                                      <li style="display: inline-block;"><i class="fa-solid fa-star" style="color: gold;"></i>
                                      </li>
                                      <li style="display: inline-block;"><i class="fa-solid fa-star" style="color: gold;"></i>
                                      </li>
                                      <li style="display: inline-block;"><i class="fa-solid fa-star" style="color: gold;"></i>
                                      </li>
                                    </ul>
                                    <%if(data[i].orginalPrice){%>
                                      <span class="price">Price: <strike> ₹<%=data[i].orginalPrice %></strike> <br> ₹<%=data[i].price %></span><br>
                                  <%}else{%>
                                      <span class="price"> ₹<%=data[i].price %></span><br>
                                      <br>
                                  <%}%>
                                  
                                    <button style="border: none; background-color:#FD8F5F; display: inline-block; margin-right: 20px" onclick="addtocart('<%=data[i]._id%>')">
                                      <i class="fa fa-shopping-cart" style="font-size:36px;color: black; "></i>
                                  </button>
                                  <button style="border: none; background-color:#FD8F5F; display: inline-block;" onclick="addtoWishlist('<%=data[i]._id%>')">
                                    <i class="fa fa-heart" style="font-size:36px;color: black;"></i>
                                  </button>
                                   
                                </div>
                                
                              </div>

                          </div>
                      <% } %>
                      <% } %>
                      
                          </div>
                          
                   <!-- your_template_file.ejs -->

               
           
          
              <div class="row justify-content-center">
                  <div class="room-btn mt-20">
                      <a href="category.html" class="border-btn">Browse More</a>
                  </div>
              </div>
          </div>
          

          </div>
        
      </div>
    </div>


    <div class="categories-area section-padding40 gray-bg">
      <div class="container">
        <div class="row">
          <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
              <div class="cat-icon">
                <img src="assets/img/icon/services1.svg" alt>
              </div>
              <div class="cat-cap">
                <h5>Fast & Free Delivery</h5>
                <p>Free delivery on all orders</p>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".2s">
              <div class="cat-icon">
                <img src="assets/img/icon/services2.svg" alt>
              </div>
              <div class="cat-cap">
                <h5>Secure Payment</h5>
                <p>Free delivery on all orders</p>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".4s">
              <div class="cat-icon">
                <img src="assets/img/icon/services3.svg" alt>
              </div>
              <div class="cat-cap">
                <h5>Money Back Guarantee</h5>
                <p>Free delivery on all orders</p>
              </div>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="single-cat mb-50 wow fadeInUp" data-wow-duration="1s" data-wow-delay=".5s">
              <div class="cat-icon">
                <img src="assets/img/icon/services4.svg" alt>
              </div>
              <div class="cat-cap">
                <h5>Online Support</h5>
                <p>Free delivery on all orders</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </main>
  <footer>
    <div class="footer-wrapper">

      <div class="footer-area footer-padding">
        <div class="container ">
          <div class="row justify-content-between">
            <div class="col-xl-4 col-lg-3 col-md-8 col-sm-8">
              <div class="single-footer-caption mb-50">
                <div class="single-footer-caption mb-30">

                  <div class="footer-logo mb-35">
                    <a href="index.html"><img src="assets/img/logo/logo2_footer.png" alt></a>
                  </div>
                  <div class="footer-tittle">
                    <div class="footer-pera">
                      <p>Suspendisse varius enim in eros elementum tristique. Duis cursus, mi quis viverra ornare, eros
                        dolor interdum nulla.</p>
                    </div>
                  </div>

                  <div class="footer-social">
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="https://bit.ly/sai4ull"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-pinterest-p"></i></a>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Quick links</h4>
                  <ul>
                    <li><a href="#">Image Licensin</a></li>
                    <li><a href="#">Style Guide</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Shop Category</h4>
                  <ul>
                    <li><a href="#">Image Licensin</a></li>
                    <li><a href="#">Style Guide</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-xl-2 col-lg-2 col-md-4 col-sm-4">
              <div class="single-footer-caption mb-50">
                <div class="footer-tittle">
                  <h4>Pertners</h4>
                  <ul>
                    <li><a href="#">Image Licensin</a></li>
                    <li><a href="#">Style Guide</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom-area">
        <div class="container">
          <div class="footer-border">
            <div class="row d-flex align-items-center">
              <div class="col-xl-12 ">
                <div class="footer-copy-right text-center">
                  <p>
                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is
                    made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com"
                      target="_blank">Colorlib</a>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </footer>

  <div id="back-top">
    <a title="Go to Top" href="#"> <i class="fas fa-level-up-alt"></i></a>
  </div>



  <script>
  async function addtocart(productId) {
      console.log(productId);
      console.log("hai");
      
      
      const response = await fetch('/postaddtocart', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ productId})
      })
      const data = await response.json();
      console.log(data);
      if (data.success === true) {
      
        window.location.href = `http://localhost:3002/usercart` 
      } else {
        Swal.fire({
          title: 'Error!',
          text: data.message,
          icon: 'error' 
        })
        

     
      }
    }
    async function addtoWishlist(productId) {
      console.log(productId);
      console.log("hai");
      
      
      const response = await fetch('/addtowishlist', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ productId})
      })
      const data = await response.json();
      console.log(data);
      if (data.success === true) {
      
        window.location.href = '/getuserproduct' ;
      } else {
        Swal.fire({
          title: 'Error!',
          text: data.message,
          icon: 'error' 
        })
        

     
      }
    }
  </script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="./assets/js/vendor/modernizr-3.5.0.min.js"></script>
  <script src="./assets/js/vendor/jquery-1.12.4.min.js"></script>
  <script src="./assets/js/popper.min.js"></script>
  <script src="./assets/js/bootstrap.min.js"></script>

  <script src="./assets/js/owl.carousel.min.js"></script>
  <script src="./assets/js/slick.min.js"></script>
  <script src="./assets/js/jquery.slicknav.min.js"></script>

  <script src="./assets/js/wow.min.js"></script>
  <script src="./assets/js/animated.headline.js"></script>
  <script src="./assets/js/jquery.magnific-popup.js"></script>
  <script src="./assets/js/gijgo.min.js"></script>
  <script src="./assets/js/lightslider.min.js"></script>
  <script src="./assets/js/price_rangs.js"></script>

  <script src="./assets/js/jquery.nice-select.min.js"></script>
  <script src="./assets/js/jquery.sticky.js"></script>
  <script src="./assets/js/jquery.barfiller.js"></script>

  <script src="./assets/js/jquery.counterup.min.js"></script>
  <script src="./assets/js/waypoints.min.js"></script>
  <script src="./assets/js/jquery.countdown.min.js"></script>
  <script src="./assets/js/hover-direction-snake.min.js"></script>

  <script src="./assets/js/contact.js"></script>
  <script src="./assets/js/jquery.form.js"></script>
  <script src="./assets/js/jquery.validate.min.js"></script>
  <script src="./assets/js/mail-script.js"></script>
  <script src="./assets/js/jquery.ajaxchimp.min.js"></script>

  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/main.js"></script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
  

<script>
        document.getElementById('sortBySelect').addEventListener('change', function() {
            const selectedOption = this.value;
            // Send a request to the server with the selected sorting option
            fetch(`/sort?sortBy=${selectedOption}`)
                .then(response => response.json())
                .then(data => {
                    // Update the products list with the sorted data
                    const productsList = document.getElementById('productsList');
                    productsList.innerHTML = ''; // Clear previous content
                    data.forEach(product => {
                        // Append each product to the products list
                        const productElement = document.createElement('div');
                        productElement.textContent = JSON.stringify(product);
                        productsList.appendChild(productElement);
                    });
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
  </script>
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317"
    integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA=="
    data-cf-beacon='{"rayId":"85441fb6a85929f3","b":1,"version":"2024.2.0","token":"cd0b4b3a733644fc843ef0b185f98241"}'
    crossorigin="anonymous"></script>
</body>

</html>